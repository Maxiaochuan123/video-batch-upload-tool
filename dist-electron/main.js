"use strict";const{app:o,BrowserWindow:i,globalShortcut:s}=require("electron"),n=require("path");let e=null;function t(){return e||(e=new i({width:1200,height:800,title:"视频批量上传工具",icon:n.join(__dirname,"../src/assets/logo.ico"),autoHideMenuBar:!0,show:!1,backgroundColor:"#ffffff",webPreferences:{nodeIntegration:!0,contextIsolation:!1,devTools:!0}}),e.maximize(),process.env.VITE_DEV_SERVER_URL?(e.loadURL(process.env.VITE_DEV_SERVER_URL),e.webContents.openDevTools()):e.loadFile(n.join(__dirname,"../dist/index.html")),e.webContents.on("did-finish-load",()=>{e.show()}),e.on("closed",()=>{e=null}),e)}o.commandLine.appendSwitch("disable-site-isolation-trials");o.commandLine.appendSwitch("disable-features","OutOfBlinkCors");o.whenReady().then(()=>{e=t(),s.register("CommandOrControl+Shift+I",()=>{e&&e.webContents.toggleDevTools()}),o.on("activate",()=>{i.getAllWindows().length===0&&(e=t())})});o.on("window-all-closed",()=>{process.platform!=="darwin"&&o.quit()});o.on("will-quit",()=>{s.unregisterAll()});
